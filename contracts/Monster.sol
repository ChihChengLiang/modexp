contract Monster {
    function test_modexp(uint256 x) public view returns (uint256 xx, uint256 gasCost) {
        gasCost = gasleft();
        xx = modexp(x);
        gasCost = gasCost - gasleft();
    }

    function modexp(uint256 x) internal pure returns (uint256 xx) {
        assembly {
            xx := 1
            let n := 0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(xx, xx, n)
            xx := mulmod(mulmod(xx, xx, n), x, n)
            xx := mulmod(xx, xx, n)
        }
    }
}
